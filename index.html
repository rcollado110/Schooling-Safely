<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119992279-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-119992279-1');
  </script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <!--Open Graph tags -->
  <meta property="og:title" content="Schooling Safely" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://lehman-webdev.github.io/project-2-need_wood/" />
  <meta property="og:image" content="https://www.campussafetymagazine.com/wp-content/uploads/2016/05/school_safety_divison.jpg"
  />
  <meta property="og:description" content="A website dedicated to showing where crime is happening in NYC as reported by schools."
  />

  <!--Twitter Card-->
  <meta name="twitter:card" contect="summary">
  <meta name="twitter:title" content="Schooling Safely">
  <meta name="twitter:description" content="is a way to select the best school for our children. With Schooling Safely we can now look at the
  crime in and around our school districts and school safely">
  <meta name="twitter:url" content="https://lehman-webdev.github.io/project-2-need_wood/index.html">
  <meta name="twitter:image" content="https://lehman-webdev.github.io/project-2-need_wood/img/intro-bg.jpg">

  <title>Schooling Safely</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Cabin:700' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this template -->
  <link href="css/grayscale.min.css" rel="stylesheet">
  <link href="css/custom.css" rel="stylesheet">

  <!-- Necessary files for d3 + topojson -->
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <style>
    .boroughs {
      fill: rgba(108, 170, 199, .4);
      stroke: rgba(0, 0, 0, .9);
      stroke-width: 0.5px;
      cursor: pointer;
    }

    .boroughs:hover {
      fill: white;
    }

    .tooltip {
      position: absolute;
      text-align: center;
      font-size: 12px;
      width: auto;
      height: auto;
      padding: 2px;
      pointer-events: none;
      color: #000;
      border: 0px;
      border-radius: 8px;
      background: white;


    }

    .circle-hover {
      stroke: #fff;
      stroke-width: 1px;
    }
  </style>
</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fa fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Intro Header -->
  <header class="masthead">
    <div class="intro-body">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h1 class="brand-heading">Schooling Safely</h1>
            <p class="intro-text">A better way to find the right school.</p>
            <a href="#about" class="btn btn-circle js-scroll-trigger">
              <i class="fa fa-angle-double-down animated"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section class="content-section text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>NYC School Dist and Crime</h2>
          <div id="map-container"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <div id="map"></div>

  <!-- About Section -->
  <section id="about" class="content-section text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>About Schooling Safely</h2>
          <p>Schooling Safely is a way to select the best school for our children. With Schooling Safely we can now look at
            the crime in and around our school districts and use that data to best place our children.</p>
          <div id="BoroughChart2" style="width:500px;height:500px;">
            <canvas id="myChart2" width="400" height="400"></canvas>
          </div>
          <div id="BoroughChart3" style="width:500px;height:500px;">
            <canvas id="myChart3" width="400" height="400"></canvas>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="content-section text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Meet the Team</h2>

          <div class="row">
            <div class="col-sm-6">
              <div class="card position-relative" style="width: 18rem;">
                <img class="card-img-top rounded-circle" src="img/2.jpg" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title">Miguel Ben</h5>
                  <p class="card-text">Miguel is a Senior CS student at Lehman College. He's planning on working as a back end web dev.</p>
                  <a href="https://lehman-webdev.slack.com/team/U925NBJKH" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-slack"> </i>
                  </a>
                  <a href="https://github.com/mius00" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-github"> </i>
                  </a>
                  <a href="https://www.linkedin.com/in/miguelben" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-linkedin"> </i>
                  </a>
                </div>
              </div>


            </div>
            <div class="col-sm-6">
              <div class="card position-relative" style="width: 18rem;">
                <img class="card-img-top rounded-circle" src="img/4.jpg" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title">Rafael Collado</h5>
                  <p class="card-text">Rafael Collado is an alumni of Lehman College. Rafael has a B.S in Computer Science. He likes spending
                    his time learning new technologies, as well as spending time with his family.</p>
                  <a href="https://lehman-webdev.slack.com/team/U93UGP9QA" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-slack"> </i>
                  </a>
                  <a href="https://github.com/rcollado110" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-github"> </i>
                  </a>
                  <a href="https://www.linkedin.com/in/rafael-collado-2264a715a/" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-linkedin"> </i>
                  </a>
                </div>
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col-sm-6">
              <div class="card position-relative" style="width: 18rem;">
                <img class="card-img-top rounded-circle" src="img/5.jpg" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title">Luke McPartlan</h5>
                  <p class="card-text">Luke McPartlan is a Senior CMP B.S. Major/ Education Minor at Lehman College. Luke focuses his time on
                    game design and develpment, as well as math tutoring.</p>
                  <a href="https://lehman-webdev.slack.com/team/U92QTRLS3" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-slack"> </i>
                  </a>
                  <a href="https://github.com/lukemcpartlan" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-github"> </i>
                  </a>
                  <a href="https://www.linkedin.com/in/luke-mcpartlan-8a327b10/" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-linkedin"> </i>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-sm-6">
              <div class="card position-relative" style="width: 18rem;">
                <img class="card-img-top rounded-circle" src="img/1.jpg" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title">Rafael Velazquez</h5>
                  <p class="card-text">Rafael Velazquez is a Senior Computer Science B.S Major at Lehman College. Rafael Velazquez likes tinkering
                    with new technologies and solving puzzles.</p>
                  <a href="https://lehman-webdev.slack.com/team/U93MXNYTU" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-slack"> </i>
                  </a>
                  <a href="https://github.com/rafaelvelazquez" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-github"> </i>
                  </a>
                  <a href="https://www.linkedin.com/in/rafael-velazquez-52b938164" class="fb-ic mr-3">
                    <i class="fa fa-lg fa-linkedin"> </i>
                  </a>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="card-deck ">
              <div class="card">
                <img class="card-img-top rounded-circle" src="img/2.jpg" alt="Card image cap">
                <div class="card-body">
                  <h4 class="card-title">Card title</h4>
                  <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-slack"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-github"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-linkedin"> </i></a>
                </div>
              </div>
              <div class="card">
                <img class="card-img-top rounded-circle" src="img/4.jpg" alt="Card image cap">
                <div class="card-body">
                  <h4 class="card-title">Card title</h4>
                  <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-slack"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-github"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-linkedin"> </i></a>
                </div>
              </div>
              <div class="card">
                <img class="card-img-top rounded-circle" src="img/5.jpg" alt="Card image cap">
                <div class="card-body">
                  <h4 class="card-title">Card title</h4>
                  <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-slack"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-github"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-linkedin"> </i></a>
                </div>
              </div>
              <div class="card">
                <img class="card-img-top rounded-circle" src="img/1.jpg" alt="Card image cap">
                <div class="card-body">
                  <h4 class="card-title">Rafael Velazquez</h4>
                  <p class="card-text">Rafael Velazquez is a Senior Computer Science B.S Major at Lehman College. Rafael Velazquez likes tinkering
                    with new technologies and solving puzzles.</p>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-slack"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-github"> </i></a>
                  <a class="fb-ic mr-3"><i class="fa fa-lg fa-linkedin"> </i></a>
                </div>
              </div>
            </div> -->

        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container text-center">
      <p>Copyright &copy; Schooling Safely 2018</p>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAS3awiyrh-vn12SLSGJustE2LNcPPMeEY"></script>

  <!-- Custom scripts for this template -->
  <script src="js/grayscale.min.js"></script>
  <script src="js/grayscale.js"></script>
  <script>
    // School and Criminal data D3

    var width = 660,
      height = 595;

    var svg = d3.select("#map-container").append("svg")
      .attr("width", width)
      .attr("height", height);

    var features = svg.append("g")
      .attr("class", "features");

    var projection = d3.geo.mercator() // mercator makes it easy to center on specific lat/long
      .scale(60000)
      .center([-73.94, 40.70])
      .translate([width / 2, height / 2]); // long, lat of NYC


    var pathGenerator = d3.geo.path()
      .projection(projection);

    var tooltip = d3.select("body").append("div").attr("class", "tooltip");

    d3.json("/../SchoolDistricts.geojson", function (error, boroughs) {
      if (error) return console.error(error);
      //console.log(boroughs);

      features.selectAll("path")
        .data(boroughs.features)
        .enter()
        .append("path")
        .attr("class", "boroughs")
        .attr("d", pathGenerator)
        .on("mouseover", showTooltip)
        .on("mousemove", moveTooltip)
        .on("mouseout", hideTooltip);

      // With map made, load data and add it to our map
      d3.csv('/../nyc-crime-subset.csv', function (error2, crimeData) {
        if (error2) return console.error(error2);

        addPointsToMap(crimeData);
      });

    });

    var tooltipOffset = { x: 5, y: -25 };

    //Create a tooltip, hidden at the start
    function showTooltip(d) {
      moveTooltip();

      tooltip.style("display", "block")
        .text("School District: " + d.properties.school_dist);
    }

    //Move the tooltip to track the mouse
    function moveTooltip() {
      tooltip.style("left", (d3.event.pageX + tooltipOffset.x) + "px")
        .style("top", (d3.event.pageY + tooltipOffset.y) + "px")
        .transition()
        .duration(200)
        .style("opacity", .9); // started as 0!!! 
    }

    function hideTooltip() {
      tooltip.style("display", "none");
    }

    var addPointsToMap = function (crimeData) {
      var colorScale = d3.scale.category10();

      var radiusScale = d3.scale.sqrt()
        .domain(d3.extent(crimeData, function (crime) { return +crime.TOT; }))
        .range([2, 15]);

      // Add the tooltip container to the vis container
      // it's invisible and its position/contents are defined during mouseover
      var tooltip = d3.select("#map-container").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);

      // tooltip mouseover event handler
      var tipMouseover = function (d) {
        this.setAttribute("class", "circle-hover"); // add hover class to emphasize

        var color = colorScale(d.CR);
        var html = "<span style='color:" + color + ";'>" + d.CR + "</span><br/>" +
          "Count: " + d.TOT + "<br/>Date: " + d.MO + "/" + d.YR;

        tooltip.html(html)
          .style("left", (d3.event.pageX - 265) + "px")
          .style("top", (d3.event.pageY - 800) + "px")
          .transition()
          .duration(200)
          .style("opacity", .9) // started as 0!!!
      };

      //this is our tooltip mouseout event handler
      var tipMouseout = function (d) {
        this.classList.remove("circle-hover"); // remove hover class

        tooltip.transition()
          .duration(300)
          .style("opacity", 0); // don't care about position! sorry not sorry.
      };

      svg.selectAll("circle")
        .data(crimeData)
        .enter().append("circle")
        .attr("fill", function (d) { return colorScale(d.CR); })
        .attr("cx", function (d) { return projection([+d.longitude, +d.latitude])[0]; })
        .attr("cy", function (d) { return projection([+d.longitude, +d.latitude])[1]; })
        .attr("r", function (d) { return radiusScale(+d.TOT); })
        .on("mouseover", tipMouseover)
        .on("mouseout", tipMouseout);
    };
  </script>

  <!-- ChartJS CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
</body>

</html>